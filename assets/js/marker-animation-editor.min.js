/*!
 * marker-animation-editor 1.6.4
 * Copyright (c) 2019 technote-space <technote.space@gmail.com> (https://technote.space)
 * License: GPL-3.0
 */!function(a){var t={};function e(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return a[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=a,e.c=t,e.d=function(a,t,n){e.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:n})},e.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},e.t=function(a,t){if(1&t&&(a=e(a)),8&t)return a;if(4&t&&"object"==typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var i in a)e.d(n,i,function(t){return a[t]}.bind(null,i));return n},e.n=function(a){var t=a&&a.__esModule?function(){return a.default}:function(){return a};return e.d(t,"a",t),t},e.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},e.p="",e(e.s=0)}([function(a,t,e){"use strict";var n=r(e(1)),i=r(e(2));function r(a){return a&&a.__esModule?a:{default:a}}(0,n.default)(function(){var a=[];tinymce.create("tinymce.plugins.marker_animation_button",{init:function(i){i.addButton("marker_animation",{title:marker_animation_params.title,icon:"icon highlight-icon",onclick:function(){s(i,null)},onPostRender:function(){l(i,this)}});var c=[],d={},_=[];Object.keys(marker_animation_params.details).forEach(function(a){var t=marker_animation_params.details[a];if(!t.ignore){var e=void 0,n=void 0;if("input/checkbox"===t.form)e="checked"===t.attributes.checked,n={type:"checkbox",name:a,label:t.label,checked:e};else if(marker_animation_params.is_valid_color_picker&&"color"===t.form)e=t.value,n={type:"colorpicker",name:a,label:t.label,value:e};else if("select"===t.form){var i=[];Object.keys(t.options).forEach(function(a){i.push({text:t.options[a],value:a})}),e=t.value,n={type:"listbox",name:a,label:t.label,values:i,value:e}}else e=t.value,n={type:"textbox",name:a,label:t.label,value:e};var s=t.attributes["data-option_name"]?t.attributes["data-option_name"]:a;d["data-"+marker_animation_params.prefix+s]=o(s),_.push(r(e,a,!0)),c.push(n)}}),i.addButton("marker_animation_detail",{title:marker_animation_params.detail_title,icon:"icon highlight-icon",onclick:function(){s(i,function(){var a=n.default.Deferred();return i.windowManager.open({title:marker_animation_params.title,body:c,onSubmit:function(t){a.resolve(e(t.data))},onClose:function(){a.reject()}}),a})},onPostRender:function(){l(i,this)}}),Object.keys(marker_animation_params.settings).forEach(function(a){u(i,marker_animation_params.settings[a])}),i.on("init",function(){_.forEach(function(a){t(i,a.name,a.value,!0)}),i.dom.select("."+marker_animation_params.class).forEach(function(a){Object.keys(a.dataset).forEach(function(e){e.substring(0,marker_animation_params.prefix.length)===marker_animation_params.prefix&&t(i,e.slice(marker_animation_params.prefix.length),a.dataset[e])})}),a.push("marker_animation"),i.formatter.register("marker_animation",{inline:"span",classes:[marker_animation_params.class],attributes:d}),Object.keys(marker_animation_params.settings).forEach(function(a){m(i,d,marker_animation_params.settings[a],_)})})},createControl:function(){return null}});var t=function(a,t,e,n,r){(0,i.default)(function(i,r){var o="body ."+i;n||(o+="[data-"+marker_animation_params.prefix+t+'="'+e+'"]'),a.dom.addStyle(o+" { "+r+" }")},t,e,r)},e=function(a){var t={};return Object.keys(a).forEach(function(e){var n=a[e],i=r(n,e);i&&(t[i.name]=i.value)}),t},r=function(a,t,e){var n=marker_animation_params.details[t],i=n.attributes["data-option_name"]?n.attributes["data-option_name"]:t;if("input/checkbox"===n.form)if(a){if(!e&&n.attributes["data-value"])return!1;a=void 0===n.attributes["data-option_value-true"]?a:n.attributes["data-option_value-true"]}else{if(!e&&!n.attributes["data-value"])return!1;a=void 0===n.attributes["data-option_value-false"]?a:n.attributes["data-option_value-false"]}return!!(e||""!==a&&a!==n.attributes["data-value"])&&{name:i,value:a}},o=function(a){return function(t){return void 0===t?"":null===t[a]?"null":void 0!==t[a]?t[a]:""}},s=function(e,i,r,o){var s=e.selection.getNode(),l=(0,n.default)(s),u=e.selection.getBookmark();if(void 0===r&&(r="marker_animation"),void 0===o&&(o=marker_animation_params.class),l.hasClass(o))a.forEach(function(a){try{e.formatter.remove(a,void 0,s)}catch(a){}}),e.selection.moveToBookmark(u);else{var m=void 0;i?m=i():(m=n.default.Deferred(),setTimeout(function(){m.resolve({})},1)),m.done(function(a){!function(a,e){Object.keys(e).forEach(function(n){t(a,n,e[n])})}(e,a);var n=e.selection.getContent();e.formatter.apply(r,a,""===n?s:null),e.selection.moveToBookmark(u)})}},l=function(a,t,e){void 0===e&&(e=marker_animation_params.class),a.on("NodeChange",function(a){t.active(a.element.classList.contains(e))})},u=function(a,t){var e=t.id,n="marker_animation-"+e,i=marker_animation_params.class+"-"+e;t.options.is_valid_button&&a.addButton(n,{title:t.title,icon:"icon highlight-icon setting-"+e,onclick:function(){s(a,null,n,i)},onPostRender:function(){l(a,this,i)}}),t.options.is_valid_style&&a.addCommand("marker_animation_preset_color"+e,function(){s(a,null,n,i)})},m=function(e,n,i,r){var o=i.id,s="marker_animation-"+o,l=marker_animation_params.class+"-"+o;a.push(s),e.formatter.register(s,{inline:"span",classes:[l],attributes:n}),t(e,"display","inline",!0,l),t(e,"background-position","left -100% center",!0,l),t(e,"background-repeat","repeat-x",!0,l),r.forEach(function(a){t(e,a.name,a.value,!0,l)}),Object.keys(i.options).forEach(function(a){t(e,a,i.options[a],!0,l)})};tinymce.PluginManager.add("marker_animation_button_plugin",tinymce.plugins.marker_animation_button)})},function(a,t){a.exports=jQuery},function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),void 0===marker_animation_params.added_style&&(marker_animation_params.added_style={});t.default=function(a,t,e,n){if(void 0===n&&(n=marker_animation_params.class),!(marker_animation_params.added_style[n]&&marker_animation_params.added_style[n][t]&&marker_animation_params.added_style[n][t][e])){var i=null;"color"===t?i="background-image:linear-gradient(to right,rgba(255,255,255,0) 50%,"+e+" 50%)":"thickness"===t?i="background-size:200% "+e:"font_weight"===t?i="font-weight:"+(e&&"null"!==e?e:"normal"):"padding_bottom"===t?i="padding-bottom:"+e:"display"===t?i="display:"+e:"background-position"===t?i="background-position:"+e:"background-repeat"===t&&(i="background-repeat:"+e),i&&a(n,i),marker_animation_params.added_style[n]||(marker_animation_params.added_style[n]={}),marker_animation_params.added_style[n][t]||(marker_animation_params.added_style[n][t]={}),marker_animation_params.added_style[n][t][e]=!0}}}]);