/*!
 * marker-animation-editor 1.6.5
 * Copyright (c) 2019 Technote <technote.space@gmail.com> (https://technote.space)
 * License: GPL-3.0
 */!function(a){var t={};function e(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return a[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=a,e.c=t,e.d=function(a,t,n){e.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:n})},e.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},e.t=function(a,t){if(1&t&&(a=e(a)),8&t)return a;if(4&t&&"object"==typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var i in a)e.d(n,i,function(t){return a[t]}.bind(null,i));return n},e.n=function(a){var t=a&&a.__esModule?function(){return a.default}:function(){return a};return e.d(t,"a",t),t},e.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},e.p="",e(e.s=0)}([function(a,t,e){"use strict";var n,i=e(1),r=(n=i)&&n.__esModule?n:{default:n},o=e(2);(0,r.default)(function(){var a=[];tinymce.create("tinymce.plugins.marker_animation_button",{init:function(m){m.addButton("marker_animation",{title:marker_animation_params.title,icon:"icon highlight-icon",onclick:function(){i(m,null)},onPostRender:function(){s(m,this)}});var c=[],d={},_=[];Object.keys(marker_animation_params.details).forEach(function(a){var t=marker_animation_params.details[a];if(!t.ignore){var e=void 0,i=void 0;if("input/checkbox"===t.form)e="checked"===t.attributes.checked,i={type:"checkbox",name:a,label:t.label,checked:e};else if(marker_animation_params.is_valid_color_picker&&"color"===t.form)e=t.value,i={type:"colorpicker",name:a,label:t.label,value:e};else if("select"===t.form){var r=[];Object.keys(t.options).forEach(function(a){r.push({text:t.options[a],value:a})}),e=t.value,i={type:"listbox",name:a,label:t.label,values:r,value:e}}else e=t.value,i={type:"textbox",name:a,label:t.label,value:e};var s=t.attributes["data-option_name"]?t.attributes["data-option_name"]:a;d["data-"+marker_animation_params.prefix+s]=n(s),_.push((0,o.parseInputValue)(e,a,!0)),c.push(i)}}),m.addButton("marker_animation_detail",{title:marker_animation_params.detail_title,icon:"icon highlight-icon",onclick:function(){i(m,function(){var a=r.default.Deferred();return m.windowManager.open({title:marker_animation_params.title,body:c,onSubmit:function(t){a.resolve(e(t.data))},onClose:function(){a.reject()}}),a})},onPostRender:function(){s(m,this)}}),Object.keys(marker_animation_params.settings).forEach(function(a){l(m,marker_animation_params.settings[a])}),m.on("init",function(){_.forEach(function(a){t(m,a.name,a.value,!0)}),m.dom.select("."+marker_animation_params.class).forEach(function(a){Object.keys(a.dataset).forEach(function(e){e.substring(0,marker_animation_params.prefix.length)===marker_animation_params.prefix&&t(m,e.slice(marker_animation_params.prefix.length),a.dataset[e])})}),a.push("marker_animation"),m.formatter.register("marker_animation",{inline:"span",classes:[marker_animation_params.class],attributes:d}),Object.keys(marker_animation_params.settings).forEach(function(a){u(m,d,marker_animation_params.settings[a],_)})})},createControl:function(){return null}});var t=function(a,t,e,n,i){(0,o._addStyle)(function(i,r){var o=(marker_animation_params.is_block_editor?"body #editor":"body")+" ."+i;n||(o+="[data-"+marker_animation_params.prefix+t+'="'+e+'"]'),a.dom.addStyle(o+" { "+r+" }")},t,e,i)},e=function(a){var t={};return Object.keys(a).forEach(function(e){var n=a[e],i=(0,o.parseInputValue)(n,e);i&&(t[i.name]=i.value)}),t},n=function(a){return function(t){return void 0===t?"":null===t[a]?"null":void 0!==t[a]?t[a]:""}},i=function(e,n,i,o){var s=e.selection.getNode(),l=(0,r.default)(s),u=e.selection.getSel().focusNode.classList,m=e.selection.getBookmark();if(void 0===i&&(i="marker_animation"),void 0===o&&(o=marker_animation_params.class),u&&u.contains(o)||l.hasClass(o))a.forEach(function(a){try{e.formatter.remove(a,void 0,s)}catch(a){}}),e.selection.moveToBookmark(m);else{var c=void 0;n?c=n():(c=r.default.Deferred(),setTimeout(function(){c.resolve({})},1)),c.done(function(a){!function(a,e){Object.keys(e).forEach(function(n){t(a,n,e[n])})}(e,a);var n=e.selection.getContent();e.formatter.apply(i,a,""===n?s:null),e.selection.moveToBookmark(m)})}},s=function(a,t,e){void 0===e&&(e=marker_animation_params.class),a.on("NodeChange",function(a){t.active(a.element.classList.contains(e))})},l=function(a,t){var e=t.id,n="marker_animation-"+e,r=marker_animation_params.class+"-"+e;t.options.is_valid_button&&a.addButton(n,{title:t.title,icon:"icon highlight-icon setting-"+e,onclick:function(){i(a,null,n,r)},onPostRender:function(){s(a,this,r)}}),t.options.is_valid_style&&a.addCommand("marker_animation_preset_color"+e,function(){i(a,null,n,r)})},u=function(e,n,i,r){var o=i.id,s="marker_animation-"+o,l=marker_animation_params.class+"-"+o;a.push(s),e.formatter.register(s,{inline:"span",classes:[l],attributes:n}),t(e,"display","inline",!0,l),t(e,"background-position","left -100% center",!0,l),t(e,"background-repeat","repeat-x",!0,l),r.forEach(function(a){t(e,a.name,a.value,!0,l)}),Object.keys(i.options).forEach(function(a){t(e,a,i.options[a],!0,l)})};tinymce.PluginManager.add("marker_animation_button_plugin",tinymce.plugins.marker_animation_button)})},function(a,t){a.exports=jQuery},function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),void 0===marker_animation_params.added_style&&(marker_animation_params.added_style={});t._addStyle=function(a,t,e,n){if(void 0===n&&(n=marker_animation_params.class),!(marker_animation_params.added_style[n]&&marker_animation_params.added_style[n][t]&&marker_animation_params.added_style[n][t][e])){var i=null;"color"===t?i="background-image:linear-gradient(to right,rgba(255,255,255,0) 50%,"+e+" 50%)":"thickness"===t?i="background-size:200% "+e:"font_weight"===t?i="font-weight:"+(e&&"null"!==e?e:"normal"):"padding_bottom"===t?i="padding-bottom:"+e:"display"===t?i="display:"+e:"background-position"===t?i="background-position:"+e:"background-repeat"===t&&(i="background-repeat:"+e),i&&a(n,i),marker_animation_params.added_style[n]||(marker_animation_params.added_style[n]={}),marker_animation_params.added_style[n][t]||(marker_animation_params.added_style[n][t]={}),marker_animation_params.added_style[n][t][e]=!0}},t.parseInputValue=function(a,t,e){var n=marker_animation_params.details[t],i=n.attributes["data-option_name"]?n.attributes["data-option_name"]:t;if("input/checkbox"===n.form)if(a){if(!e&&n.attributes["data-value"])return!1;a=void 0===n.attributes["data-option_value-true"]?a:n.attributes["data-option_value-true"]}else{if(!e&&!n.attributes["data-value"])return!1;a=void 0===n.attributes["data-option_value-false"]?a:n.attributes["data-option_value-false"]}return!!(e||""!==a&&a!==n.attributes["data-value"])&&{name:i,value:a}}}]);